<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê± Prueba de Acceso M45 v5 - Cocobot üê±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 100px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s;
        }

        .nav-tab:hover {
            background: #e9ecef;
            color: #667eea;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .info-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .info-card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .info-card ul {
            list-style: none;
            line-height: 2;
        }

        .info-card li::before {
            content: "üê± ";
            font-size: 1.2rem;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .exercise-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .exercise-text {
            background: white;
            padding: 20px;
            border-radius: 10px;
            line-height: 2;
            margin: 20px 0;
            font-size: 1.1rem;
        }

        .question {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 5px solid #667eea;
        }

        .question h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .options {
            margin: 15px 0;
        }

        .checkbox-option {
            display: block;
            padding: 15px 20px;
            margin: 10px 0;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .checkbox-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-option.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .checkbox-option.wrong {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .checkbox-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .checkbox-option.selected input[type="checkbox"] {
            accent-color: white;
        }

        .score-display {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 600;
            padding: 25px;
            background: #667eea;
            color: white;
            border-radius: 10px;
            margin: 25px 0;
        }

        .result-message {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .result-excellent {
            background: #d4edda;
            color: #155724;
        }

        .result-good {
            background: #cce5ff;
            color: #004085;
        }

        .result-fair {
            background: #fff3cd;
            color: #856404;
        }

        .result-need-work {
            background: #f8d7da;
            color: #721c24;
        }

        .feedback {
            background: #e7f0ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            line-height: 1.9;
        }

        .feedback strong {
            color: #667eea;
            font-size: 1.1rem;
        }

        .answer-reveal-btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.2s;
            margin-bottom: 20px;
        }

        .answer-reveal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .content {
                padding: 20px;
            }

            .nav-tab {
                padding: 10px 5px;
                font-size: 0.9rem;
            }

            .question {
                padding: 15px;
            }

            .checkbox-option {
                padding: 12px 15px;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê± Prueba de Acceso M45 v5 üê±</h1>
            <p>Prepara tu acceso a la universidad con Cocobot</p>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="info">üìö Informaci√≥n</div>
            <div class="nav-tab" data-tab="practice">üìù Pr√°ctica</div>
            <div class="nav-tab" data-tab="diagnostic">üß™ Evaluaci√≥n</div>
        </div>

        <div class="content">
            <!-- Informaci√≥n Section -->
            <div class="section active" id="info">
                <div class="info-card">
                    <h2>üìã Sobre el Examen M45</h2>
                    <ul>
                        <li><strong>Convocatoria 2025/26:</strong> Pruebas el 14-15 de abril</li>
                        <li><strong>Matr√≠cula:</strong> 9-20 de marzo</li>
                        <li><strong>Fase General:</strong> Comentario de texto + Lengua castellana</li>
                        <li><strong>Duraci√≥n:</strong> 90 minutos por ejercicio</li>
                        <li><strong>Para aprobar:</strong> M√≠nimo 5 puntos + entrevista aprobada</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h2>üéØ Objetivo</h2>
                    <p>Practica la lectura comprensiva con ejercicios interactivos. Cada vez que recargas, ¬°aparecen nuevos textos!</p>
                </div>

                <div class="info-card">
                    <h2>üí° C√≥mo usar</h2>
                    <ul>
                        <li>Lee el texto completo</li>
                        <li>Selecciona las respuestas correctas con checkboxes</li>
                        <li>Haz clic en "Ver Respuestas" para ver cu√°les son correctas</li>
                        <li>Practica tanto como necesites</li>
                    </ul>
                </div>

                <div style="text-align: center;">
                    <button class="btn" onclick="showTab('practice')">üìù Comenzar</button>
                </div>
            </div>

            <!-- Pr√°ctica Section -->
            <div class="section" id="practice">
                <h2 style="color: #667eea; margin-bottom: 20px; font-size: 1.8rem;">üìù Ejercicio de Pr√°ctica</h2>
                <p style="text-align: center; margin-bottom: 20px; color: #6c757d;">Selecciona una respuesta para cada pregunta</p>

                <div id="practice-container">
                    <div class="exercise-text" id="practice-text"></div>
                    <div id="practice-questions"></div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn" id="practice-submit" onclick="submitPractice()">‚úÖ Ver Respuestas</button>
                        <button class="btn btn-secondary" onclick="generateNewPractice()">üîÑ Nuevo Texto</button>
                    </div>
                    <div id="practice-result"></div>
                </div>
            </div>

            <!-- Diagnostics Section -->
            <div class="section" id="diagnostic">
                <h2 style="color: #667eea; margin-bottom: 20px; font-size: 1.8rem;">üß™ Evaluaci√≥n Diagn√≥stica</h2>
                <p style="text-align: center; margin-bottom: 20px; color: #6c757d;">Realiza esta prueba para evaluar tu nivel</p>

                <div id="diagnostic-container">
                    <div class="exercise-text" id="diagnostic-text"></div>
                    <div id="diagnostic-questions"></div>
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn" id="diagnostic-submit" onclick="submitDiagnostic()">‚úÖ Ver Resultados</button>
                        <button class="btn btn-secondary" id="diagnostic-reset" onclick="resetDiagnostic()">üîÑ Reiniciar</button>
                    </div>
                    <div id="diagnostic-result"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Textos para pr√°ctica
        const practiceTexts = [
            {
                text: "La inteligencia artificial ha transformado radicalmente la forma en que vivimos y trabajamos. Desde asistentes virtuales como Siri y Alexa hasta algoritmos que recomiendan contenido en plataformas de streaming, la IA est√° presente en casi todos los aspectos de nuestra vida diaria. Seg√∫n expertos, para el a√±o 2030 se estima que m√°s del 40% de las tareas laborales estar√°n automatizadas en alg√∫n grado.\n\nSin embargo, esta transformaci√≥n no es necesariamente negativa. Los avances en IA han permitido desarrollar soluciones a problemas complejos que antes parec√≠an imposibles. Desde la detecci√≥n temprana de enfermedades hasta la optimizaci√≥n de rutas de transporte, las aplicaciones pr√°cticas de la inteligencia artificial est√°n mejorando la calidad de vida humana.\n\nEl mayor desaf√≠o que enfrentamos es encontrar un equilibrio adecuado. Necesitamos aprovechar los beneficios de la tecnolog√≠a sin perder nuestra esencia humana. La educaci√≥n y la formaci√≥n continua ser√°n clave para asegurar que las personas puedan adaptarse a este nuevo panorama.",
                questions: [
                    {
                        question: "¬øQu√© porcentaje de las tareas laborales se estima que estar√° automatizado para el 2030?",
                        options: ["20%", "40%", "60%", "80%"],
                        correct: 1
                    },
                    {
                        question: "¬øCu√°l es un beneficio pr√°ctico de la inteligencia artificial mencionado en el texto?",
                        options: ["Crear trabajos para todos", "Detectar enfermedades temprano", "Eliminar la necesidad de educaci√≥n", "Automatizar todas las tareas humanas"],
                        correct: 1
                    },
                    {
                        question: "¬øCu√°l es el principal desaf√≠o que enfrentamos con la inteligencia artificial?",
                        options: ["La falta de tecnolog√≠a suficiente", "Encontrar un equilibrio adecuado entre tecnolog√≠a y humanidad", "La automatizaci√≥n de todas las tareas", "La prohibici√≥n del uso de IA"],
                        correct: 1
                    }
                ]
            },
            {
                text: "El cambio clim√°tico es uno de los desaf√≠os m√°s urgentes que enfrenta la humanidad en el siglo XXI. La actividad humana, especialmente la quema de combustibles f√≥siles, ha incrementado significativamente las emisiones de gases de efecto invernadero en la atm√≥sfera. Esto ha provocado un aumento global de la temperatura, la deriva de los polos de hielo y la alteraci√≥n de patrones clim√°ticos.\n\nLos efectos de este cambio clim√°tico son evidentes y preocupantes. Se han registrado aumentos en la frecuencia de huracanes y tormentas extremas, sequ√≠as m√°s prolongadas en regiones agr√≠colas y la p√©rdida de biodiversidad en ecosistemas sensibles. Los cient√≠ficos advierten que, si no tomamos medidas dr√°sticas, para 2050 el nivel del mar podr√≠a aumentar entre 0.5 y 1 metro, lo que amenazar√≠a a millones de personas que viven en zonas costeras.",
                questions: [
                    {
                        question: "¬øCu√°l es la causa principal del cambio clim√°tico mencionada en el texto?",
                        options: ["Las erupciones volc√°nicas", "La actividad humana, especialmente combustibles f√≥siles", "Los asteroides en el espacio", "El calentamiento solar"],
                        correct: 1
                    },
                    {
                        question: "¬øQu√© efecto del cambio clim√°tico menciona el texto?",
                        options: ["Disminuci√≥n de las tormentas", "Aumento de huracanes y tormentas extremas", "Reducci√≥n de la temperatura global", "Mayor cantidad de lluvias"],
                        correct: 1
                    },
                    {
                        question: "¬øCu√°nto podr√≠a aumentar el nivel del mar para 2050 si no se toman medidas dr√°sticas?",
                        options: ["Entre 0.5 y 1 metro", "Entre 1 y 2 metros", "Entre 2 y 3 metros", "Entre 5 y 10 metros"],
                        correct: 0
                    }
                ]
            },
            {
                text: "La educaci√≥n es uno de los pilares fundamentales del desarrollo humano y social. A lo largo de la historia, las instituciones educativas han evolucionado para adaptarse a los cambios tecnol√≥gicos y sociales. Hoy en d√≠a, el aprendizaje no se limita al aula tradicional, sino que abarca plataformas online, cursos especializados y educaci√≥n continua.\n\nEl acceso a la informaci√≥n ha democratizado el conocimiento. Gracias a internet, cualquier persona con conexi√≥n a la red puede acceder a millones de recursos educativos gratuitos. Esto ha permitido que personas de todas las edades y condiciones puedan aprender nuevas habilidades, actualizar sus conocimientos y adaptarse a un mundo en constante cambio.\n\nNo obstante, la educaci√≥n tambi√©n enfrenta desaf√≠os importantes. La brecha digital, la calidad de la ense√±anza y la adaptaci√≥n a las necesidades del mercado laboral son cuestiones que requieren atenci√≥n urgente. El futuro de la educaci√≥n depender√° de nuestra capacidad para innovar y mantenerse relevantes.",
                questions: [
                    {
                        question: "¬øQu√© ha permitido democratizar el acceso a la informaci√≥n seg√∫n el texto?",
                        options: ["La televisi√≥n", "La educaci√≥n tradicional", "Internet", "Los libros"],
                        correct: 2
                    },
                    {
                        question: "¬øCu√°l es uno de los desaf√≠os que enfrenta la educaci√≥n mencionado en el texto?",
                        options: ["La falta de estudiantes interesados", "La brecha digital, la calidad de ense√±anza y adaptaci√≥n laboral", "El aumento de profesores", "La falta de presupuesto"],
                        correct: 1
                    },
                    {
                        question: "¬øC√≥mo se ha adaptado la educaci√≥n a los cambios tecnol√≥gicos?",
                        options: ["Eliminando la tecnolog√≠a", "A trav√©s de plataformas online y educaci√≥n continua", "Solo en universidades", "No se ha adaptado"],
                        correct: 1
                    }
                ]
            },
            {
                text: "La salud mental es tan importante como la salud f√≠sica, pero a menudo es menos priorizada. El estr√©s cr√≥nico, la ansiedad y la depresi√≥n afectan a millones de personas en todo el mundo. Seg√∫n la OMS, m√°s de 300 millones de personas sufren de depresi√≥n en alg√∫n momento de sus vidas.\n\nLas causas de los problemas de salud mental son multifactoriales. Factores gen√©ticos, ambientales, sociales y emocionales pueden contribuir al desarrollo de trastornos mentales. La buena noticia es que, con el diagn√≥stico oportuno y el tratamiento adecuado, la gran mayor√≠a de las personas pueden recuperar su bienestar mental.\n\nLa prevenci√≥n es fundamental. La pr√°ctica de h√°bitos saludables como el ejercicio regular, la alimentaci√≥n balanceada, la buena calidad del sue√±o y la conexi√≥n social pueden reducir significativamente el riesgo de problemas mentales. Adem√°s, hablar abiertamente sobre la salud mental ayuda a reducir el estigma y fomenta la b√∫squeda de ayuda cuando sea necesaria.",
                questions: [
                    {
                        question: "¬øCu√°ntas personas sufren de depresi√≥n seg√∫n la OMS?",
                        options: ["M√°s de 100 millones", "M√°s de 300 millones", "M√°s de 500 millones", "M√°s de 1 bill√≥n"],
                        correct: 1
                    },
                    {
                        question: "¬øQu√© puede ayudar a reducir el riesgo de problemas mentales?",
                        options: ["La falta de sue√±o y ejercicio", "El aislamiento social", "La pr√°ctica de h√°bitos saludables y conexi√≥n social", "El consumo de alcohol"],
                        correct: 2
                    },
                    {
                        question: "¬øCu√°l es una causa de los problemas de salud mental mencionada en el texto?",
                        options: ["Solo factores gen√©ticos", "Factores gen√©ticos, ambientales, sociales y emocionales", "Solo factores ambientales", "Solo factores emocionales"],
                        correct: 1
                    }
                ]
            },
            {
                text: "El turismo sostenible es una forma de viajar que minimiza el impacto negativo en el medio ambiente y las comunidades locales. A medida que crece la conciencia sobre la crisis clim√°tica y la necesidad de proteger el planeta, cada vez m√°s viajeros est√°n optando por opciones tur√≠sticas responsables.\n\nEl turismo sostenible se basa en tres pilares fundamentales: el impacto ambiental, el impacto social y el impacto econ√≥mico. Los viajes sostenibles buscan reducir la contaminaci√≥n, respetar las culturas locales, apoyar la econom√≠a de las comunidades visitadas y preservar los recursos naturales para las generaciones futuras.\n\nLos beneficios del turismo sostenible son m√∫ltiples. No solo protege el medio ambiente, sino que tambi√©n genera empleos locales, preserva el patrimonio cultural y promueve el entendimiento intercultural. Los turistas conscientes pueden contribuir positivamente al destino que visitan, creando un viaje m√°s significativo y enriquecedor para todos.",
                questions: [
                    {
                        question: "¬øQu√© es el turismo sostenible?",
                        options: ["Viajar sin dinero", "Viajar que minimiza impacto negativo en el ambiente y comunidades", "Viajar r√°pido", "Viajar solo para descansar"],
                        correct: 1
                    },
                    {
                        question: "¬øCu√°ntos pilares fundamentales se mencionan para el turismo sostenible?",
                        options: ["Dos", "Tres", "Cuatro", "Cinco"],
                        correct: 1
                    },
                    {
                        question: "¬øQu√© beneficio del turismo sostenible menciona el texto?",
                        options: ["Solo reduce contaminaci√≥n", "Genera empleos locales y preserva patrimonio cultural", "Aumenta el consumo de recursos", "No tiene beneficios sociales"],
                        correct: 1
                    }
                ]
            }
        ];

        let currentPracticeText = null;
        let currentDiagnosticText = null;
        let practiceAnswers = {};
        let diagnosticAnswers = {};

        // Generar ejercicio de pr√°ctica
        function generateNewPractice() {
            const randomIndex = Math.floor(Math.random() * practiceTexts.length);
            currentPracticeText = practiceTexts[randomIndex];

            document.getElementById('practice-text').innerHTML = currentPracticeText.text;

            const questionsContainer = document.getElementById('practice-questions');
            questionsContainer.innerHTML = '';

            currentPracticeText.questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `<h3>${index + 1}. ${q.question}</h3><div class="options">`;

                q.options.forEach((option, optIndex) => {
                    const optionDiv = document.createElement('label');
                    optionDiv.className = 'checkbox-option';
                    optionDiv.innerHTML = `
                        <input type="checkbox" name="${type}-${index}" value="${optIndex}">
                        ${option}
                    `;
                    optionDiv.onclick = function(e) {
                        // Prevenir que el clic en el label active/desactive el checkbox de forma extra√±a
                        e.stopPropagation();
                        this.classList.toggle('selected');
                    };
                    questionDiv.querySelector('.options').appendChild(optionDiv);
                });

                questionDiv.innerHTML += '</div>';
                questionsContainer.appendChild(questionDiv);
            });

            practiceAnswers = {};
            document.getElementById('practice-submit').style.display = 'inline-block';
            document.getElementById('practice-submit').disabled = false;
            document.getElementById('practice-result').innerHTML = '';
        }

        // Generar ejercicio diagn√≥stico
        let diagnosticTexts = [...practiceTexts];

        function generateDiagnosticText() {
            if (diagnosticTexts.length === 0) {
                diagnosticTexts = [...practiceTexts];
            }

            const randomIndex = Math.floor(Math.random() * diagnosticTexts.length);
            currentDiagnosticText = diagnosticTexts[randomIndex];

            diagnosticTexts.splice(randomIndex, 1);

            document.getElementById('diagnostic-text').innerHTML = currentDiagnosticText.text;

            const questionsContainer = document.getElementById('diagnostic-questions');
            questionsContainer.innerHTML = '';

            currentDiagnosticText.questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `<h3>${index + 1}. ${q.question}</h3><div class="options">`;

                q.options.forEach((option, optIndex) => {
                    const optionDiv = document.createElement('label');
                    optionDiv.className = 'checkbox-option';
                    optionDiv.innerHTML = `
                        <input type="checkbox" name="diagnostic-${index}" value="${optIndex}">
                        ${option}
                    `;
                    optionDiv.onclick = function(e) {
                        e.stopPropagation();
                        this.classList.toggle('selected');
                    };
                    questionDiv.querySelector('.options').appendChild(optionDiv);
                });

                questionDiv.innerHTML += '</div>';
                questionsContainer.appendChild(questionDiv);
            });

            diagnosticAnswers = {};
            document.getElementById('diagnostic-submit').style.display = 'inline-block';
            document.getElementById('diagnostic-reset').style.display = 'inline-block';
            document.getElementById('diagnostic-submit').disabled = false;
            document.getElementById('diagnostic-result').innerHTML = '';
        }

        // Calcular puntuaci√≥n
        function calculateScore(type) {
            const text = type === 'practice' ? currentPracticeText : currentDiagnosticText;
            const answers = type === 'practice' ? practiceAnswers : diagnosticAnswers;

            let score = 0;
            text.questions.forEach((q, index) => {
                const checkboxes = document.querySelectorAll(`input[name="${type}-${index}"]:checked`);
                const selectedValues = Array.from(checkboxes).map(cb => parseInt(cb.value));

                // Verificar si todas las respuestas correctas est√°n marcadas
                const correctSelected = q.correct === -1 || selectedValues.includes(q.correct);
                // Verificar que no haya respuestas incorrectas marcadas (si hay una correcta)
                const noWrongSelected = q.correct === -1 || !selectedValues.some(val => val !== q.correct);

                if (correctSelected && noWrongSelected) {
                    score++;
                }
            });

            return score === 0 ? 0 : (score / text.questions.length) * 10;
        }

        // Mostrar resultado con respuestas
        function showResult(type) {
            const score = calculateScore(type);
            const text = type === 'practice' ? currentPracticeText : currentDiagnosticText;
            const answers = type === 'practice' ? practiceAnswers : diagnosticAnswers;

            let resultDiv = document.getElementById(`${type}-result`);

            // Mensaje seg√∫n puntuaci√≥n
            let message, className, feedback;

            if (score >= 9) {
                message = '¬°Excelente! üåü';
                className = 'result-excellent';
                feedback = `<strong>¬°Felicidades!</strong> Tu nivel de lectura comprensiva es excelente. Est√°s muy bien preparado/a para el examen M45. Sigue practicando.`;
            } else if (score >= 7) {
                message = '¬°Muy bien! üëè';
                className = 'result-good';
                feedback = `<strong>¬°Bien hecho!</strong> Tu nivel es bueno. Tienes una comprensi√≥n s√≥lida del texto, pero hay algunos detalles que puedes mejorar con m√°s pr√°ctica.`;
            } else if (score >= 5) {
                message = 'Buen trabajo üëç';
                className = 'result-fair';
                feedback = `<strong>Est√°s en buen camino.</strong> Has demostrado comprensi√≥n b√°sica, pero hay √°reas donde puedes mejorar. Recomiendo practicar m√°s.`;
            } else {
                message = '¬°Necesitas practicar m√°s! üí™';
                className = 'result-need-work';
                feedback = `<strong>No desanimes.</strong> La pr√°ctica es fundamental. Te recomiendo leer varios textos y hacer ejercicios diarios para mejorar tu comprensi√≥n lectora. ¬°T√∫ puedes!`;
            }

            // Mostrar cada pregunta con respuestas
            let questionsHtml = '';
            text.questions.forEach((q, index) => {
                questionsHtml += `<div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid #28a745;">`;
                questionsHtml += `<h3 style="color: #28a745; margin-bottom: 15px;">${index + 1}. ${q.question}</h3>`;
                questionsHtml += '<div class="options">';

                q.options.forEach((option, optIndex) => {
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.disabled = true;
                    checkbox.name = `${type}-result-${index}`;
                    checkbox.value = optIndex;

                    const label = document.createElement('label');
                    label.className = 'checkbox-option';
                    label.innerHTML = `${checkbox.outerHTML} ${option}`;

                    if (optIndex === q.correct) {
                        label.classList.add('correct');
                    } else {
                        const selected = document.querySelectorAll(`input[name="${type}-${index}"]:checked`);
                        const selectedValues = Array.from(selected).map(cb => parseInt(cb.value));
                        if (selectedValues.includes(optIndex)) {
                            label.classList.add('wrong');
                        }
                    }

                    questionsHtml += label.outerHTML;
                });

                questionsHtml += '</div></div>';
            });

            resultDiv.innerHTML = `
                <button class="answer-reveal-btn" onclick="showTab('${type}')">üîÑ Volver</button>
                <div class="score-display">
                    Puntuaci√≥n: ${score.toFixed(1)} / 10
                </div>
                <div class="result-message ${className}">
                    ${message}
                </div>
                <div class="feedback">
                    <strong>Feedback:</strong><br>${feedback}
                </div>
                <h3 style="text-align: center; color: #28a745;">Respuestas Correctas</h3>
                ${questionsHtml}
                <div style="text-align: center;">
                    ${score >= 5 ? '<button class="btn" onclick="generateNewPractice()">üìù Nueva Pr√°ctica</button>' : '<button class="btn btn-secondary" onclick="generateNewPractice()">üîÑ Intentar de nuevo</button>'}
                    <button class="btn btn-secondary" onclick="showTab('info')">üìö Informaci√≥n</button>
                </div>
            `;

            document.getElementById(`${type}-submit`).disabled = true;
        }

        // Submit funciones
        function submitPractice() {
            const practiceContainer = document.getElementById('practice-questions');
            const checkboxes = practiceContainer.querySelectorAll('input[type="checkbox"]');

            if (checkboxes.length === 0 || checkboxes.every(cb => !cb.checked)) {
                alert('Por favor, selecciona al menos una respuesta.');
                return;
            }

            showResult('practice');
        }

        function submitDiagnostic() {
            const diagnosticContainer = document.getElementById('diagnostic-questions');
            const checkboxes = diagnosticContainer.querySelectorAll('input[type="checkbox"]');

            if (checkboxes.length === 0 || checkboxes.every(cb => !cb.checked)) {
                alert('Por favor, selecciona al menos una respuesta.');
                return;
            }

            showResult('diagnostic');
        }

        // Reset diagn√≥stico
        function resetDiagnostic() {
            diagnosticTexts = [...practiceTexts];
            document.getElementById('diagnostic-result').innerHTML = '';
            document.getElementById('diagnostic-reset').style.display = 'inline-block';
            document.getElementById('diagnostic-submit').disabled = false;
            generateDiagnosticText();
        }

        // Navegaci√≥n entre tabs
        function showTab(tabId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

            document.getElementById(tabId).classList.add('active');
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');

            if (tabId === 'practice') {
                if (!currentPracticeText) {
                    generateNewPractice();
                } else {
                    document.getElementById('practice-submit').style.display = 'inline-block';
                    document.getElementById('practice-submit').disabled = false;
                    document.getElementById('practice-result').innerHTML = '';
                }
            } else if (tabId === 'diagnostic') {
                if (!currentDiagnosticText) {
                    generateDiagnosticText();
                } else {
                    document.getElementById('diagnostic-submit').style.display = 'inline-block';
                    document.getElementById('diagnostic-reset').style.display = 'inline-block';
                    document.getElementById('diagnostic-submit').disabled = false;
                    document.getElementById('diagnostic-result').innerHTML = '';
                }
            }
        }

        // Event listeners para tabs
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => showTab(tab.dataset.tab));
        });

        // Inicializar con pr√°ctica
        generateNewPractice();
    </script>
</body>
</html>