<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Solar Interactivo - Para Zoe</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background-color: #000;
            color: white;
        }
        
        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .ui-overlay {
            position: absolute;
            z-index: 10;
            pointer-events: none;
        }
        
        #planet-info-panel {
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 3px solid gold;
            display: none;
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        #planet-name {
            font-size: 2em;
            color: gold;
            text-align: center;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        #planet-description {
            line-height: 1.6;
            font-size: 1.1em;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        #planet-facts {
            margin-top: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .fact-item {
            background: rgba(255, 215, 0, 0.2);
            padding: 8px;
            border-radius: 8px;
            font-size: 0.9em;
        }
        
        .fact-label {
            font-weight: bold;
            color: lightblue;
        }
        
        #controls-top {
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .control-group { margin-bottom: 10px; }
        label { font-size: 0.9em; margin-right: 8px; }
        input[type="range"] { vertical-align: middle; }
        
        button {
            cursor: pointer;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-primary { background: linear-gradient(45deg, #ff6b6b, #feca57); color: white; }
        .btn-secondary { background: linear-gradient(45deg, #48dbfb, #1dd1a1); color: white; }
        .btn-info { background: linear-gradient(45deg, #5f27cd, #54a0ff); color: white; }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        #game-panel {
            top: 20px;
            right: 20px;
            width: 200px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .score-display { font-size: 2em; color: gold; margin: 10px 0; }
        .achievements-list {
            list-style: none;
            text-align: left;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .achievement {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }
        
        .achievement.unlocked {
            background: rgba(255, 215, 0, 0.3);
            border-left: 4px solid gold;
        }
        
        .achievement-icon { margin-right: 10px; font-size: 1.5em; }
        
        #instructions {
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9em;
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: gold; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <!-- Controles Superiores -->
    <div class="ui-overlay" id="controls-top">
        <h3>üöÄ Control del Sistema Solar</h3>
        <div class="control-group">
            <label for="speedSlider">Velocidad de √≥rbita:</label>
            <input type="range" id="speedSlider" min="0" max="5" step="0.1" value="1">
            <span id="speedValue">1x</span>
        </div>
        <div class="control-group">
            <button class="btn-primary" onclick="resetCamera()">üìç Reset C√°mara</button>
            <button class="btn-secondary" onclick="showAllPlanets()">üëÅÔ∏è Mostrar Todos</button>
        </div>
        <div class="control-group">
            <button class="btn-info" onclick="toggleStarfield()">‚ú® Alternar Estrellas</button>
            <button class="btn-info" onclick="takeScreenshot()">üì∏ Capturar Pantalla</button>
        </div>
    </div>
    
    <!-- Panel de Gamificaci√≥n -->
    <div class="ui-overlay" id="game-panel">
        <h3>üèÜ Misi√≥n Espacial</h3>
        <p>Puntos:</p>
        <div class="score-display" id="score">0</div>
        <p>Explorados:</p>
        <ul class="achievements-list" id="achievementsList"></ul>
        <button class="btn-primary" style="margin-top: 10px;" onclick="resetGame()">üîÑ Reiniciar Misi√≥n</button>
    </div>
    
    <!-- Instrucciones -->
    <div class="ui-overlay" id="instructions">
        <strong>üìã C√≥mo jugar:</strong><br>
        ‚Ä¢ Haz clic en un planeta para ver informaci√≥n<br>
        ‚Ä¢ Usa el deslizador para cambiar la velocidad<br>
        ‚Ä¢ Arrastra el rat√≥n para rotar la vista<br>
        ‚Ä¢ Rueda del rat√≥n para acercar/alejar<br>
        ‚Ä¢ ¬°Completa misiones para ganar puntos!
    </div>
    
    <!-- Panel de Informaci√≥n del Planeta -->
    <div class="ui-overlay" id="planet-info-panel">
        <h2 id="planet-name">Nombre del Planeta</h2>
        <div id="planet-description"></div>
        <div id="planet-facts"></div>
    </div>

    <!-- Librer√≠as Three.js desde CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <script>
        let scene, camera, renderer, controls;
        let planets = [], planetMeshes = [], orbitLines = [];
        let speedMultiplier = 1, currentPlanet = null;
        let score = 0, unlockedAchievements = new Set();
        
        // Datos de los planetas (escala art√≠stica)
        const planetData = [
            {
                name: "Mercurio", color: "#A57C1B", size: 4, distance: 60, speed: 4.1,
                description: "El planeta m√°s peque√±o y cercano al Sol. Mercurio es un mundo rocoso y cr√°teres que no tiene atm√≥sfera significativa.",
                facts: { "Temperatura": "-173¬∞C a 427¬∞C", "Lunas": "Ninguna", "A√±o": "88 d√≠as terrestres" }
            },
            {
                name: "Venus", color: "#E3BB76", size: 9, distance: 90, speed: 1.6,
                description: "El planeta m√°s caliente del sistema solar, cubierto por una densa atm√≥sfera de di√≥xido de carbono.",
                facts: { "Temperatura": "462¬∞C (promedio)", "Lunas": "Ninguna", "D√≠a": "243 d√≠as terrestres" }
            },
            {
                name: "Tierra", color: "#2E8BC0", size: 9.5, distance: 130, speed: 1,
                description: "¬°Nuestro hogar! El √∫nico planeta conocido con vida. Tiene agua l√≠quida en su superficie. La Luna orbita nuestra hermosa tierra azul.",
                facts: { "Di√°metro": "12,742 km", "Lunas": "1 (La Luna)", "Distancia al Sol": "149.6 millones km" }
            },
            {
                name: "Marte", color: "#FF4500", size: 6, distance: 170, speed: 0.53,
                description: "El Planeta Rojo. Tiene el volc√°n m√°s grande del sistema solar y el ca√±√≥n m√°s profundo.",
                facts: { "Temperatura": "-63¬∞C (promedio)", "Lunas": "2 (Fobos y Deimos)", "A√±o": "687 d√≠as terrestres" }
            },
            {
                name: "J√∫piter", color: "#DCA678", size: 30, distance: 250, speed: 0.43,
                description: "El gigante gaseoso m√°s grande. Es tan grande que todos los dem√°s planetas cabr√≠an dentro de √©l.",
                facts: { "Mass": "2.5x otros planetas combinados", "Lunas": "79+ confirmadas", "Anillos": "S√≠ (d√©biles)" }
            },
            {
                name: "Saturno", color: "#F4D03F", size: 25, distance: 330, speed: 0.32,
                hasRings: true, ringColor: "#E0C896",
                description: "El rey de los anillos. Sus espectaculares anillos est√°n compuestos de hielo y roca.",
                facts: { "Anillos visibles": "Desde la Tierra con telescopio", "Lunas": "82+ confirmadas", "Titan": "Segunda luna m√°s grande" }
            },
            {
                name: "Urano", color: "#73BFC3", size: 18, distance: 400, speed: 0.23,
                description: "El planeta inclinado. Gira de lado, con su eje rotacional inclinado 98 grados.",
                facts: { "Inclinaci√≥n": "98¬∞", "Lunas": "27 conocidas", "Descubrimiento": "1781 por Herschel" }
            },
            {
                name: "Neptuno", color: "#4169E1", size: 17, distance: 470, speed: 0.19,
                description: "El planeta ventoso. Tiene las velocidades del viento m√°s r√°pidas del sistema solar.",
                facts: { "Vientos m√°ximos": "2,100 km/h", "Lunas": "14 conocidas", "A√±o": "165 a√±os terrestres" }
            }
        ];
        
        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000005);
            
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.set(0, 150, 300);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.maxDistance = 800;
            controls.minDistance = 20;
            
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);
            
            const sunLight = new THREE.PointLight(0xFFFFFF, 2, 1000);
            sunLight.position.set(0, 0, 0);
            sunLight.castShadow = true;
            sunLight.shadow.mapSize.width = 2048;
            sunLight.shadow.mapSize.height = 2048;
            scene.add(sunLight);
            
            createStarfield();
            createSun();
            createPlanets();
            
            window.addEventListener('resize', onWindowResize);
            renderer.domElement.addEventListener('click', onMouseClick);
            
            animate();
            initializeGame();
        }
        
        function createStarfield() {
            const starGeometry = new THREE.BufferGeometry();
            const stars = [];
            for (let i = 0; i < 5000; i++) {
                stars.push(new THREE.Vector3(
                    (Math.random() - 0.5) * 2000,
                    (Math.random() - 0.5) * 2000,
                    (Math.random() - 0.5) * 2000
                ));
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(stars.flat(), 3));
            const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 2 });
            const starField = new THREE.Points(starGeometry, starMaterial);
            scene.add(starField);
            window.starField = starField;
        }
        
        function toggleStarfield() {
            if (window.starField.visible) window.starField.visible = false;
            else window.starField.visible = true;
        }
        
        function createSun() {
            const geometry = new THREE.SphereGeometry(20, 64, 64);
            const material = new THREE.MeshBasicMaterial({ color: 0xFFD700 });
            const sun = new THREE.Mesh(geometry, material);
            
            const glowGeometry = new THREE.SphereGeometry(22, 32, 32);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: 0xFFAA00, transparent: true, opacity: 0.1
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            sun.add(glow);
            
            scene.add(sun);
            sun.userData = { type: 'sun' };
            planetMeshes.push(sun);
        }
        
        function createPlanets() {
            planetData.forEach((data, index) => createPlanet(data, index));
        }
        
        function createPlanet(data, index) {
            // √ìrbita visual
            const orbitGeometry = new THREE.RingGeometry(data.distance - 0.5, data.distance + 0.5, 128);
            const orbitMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xffffff, side: THREE.DoubleSide, transparent: true, opacity: 0.15 
            });
            const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
            orbit.rotation.x = Math.PI / 2;
            scene.add(orbit);
            orbitLines.push(orbit);
            
            // Cuerpo del planeta con textura procedimental
            const canvas = document.createElement('canvas');
            canvas.width = 512; canvas.height = 256;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = data.color;
            ctx.fillRect(0, 0, 512, 256);
            
            if (data.name === "J√∫piter" || data.name === "Saturno") {
                for (let i = 0; i < 10; i++) {
                    ctx.fillStyle = `rgba(${Math.random()*255}, ${Math.random()*200}, ${Math.random()*100}, 0.7)`;
                    ctx.fillRect(0, i * 25, 512, 20);
                }
                if (data.name === "J√∫piter") {
                    ctx.fillStyle = "#A52A2A";
                    ctx.beginPath(); ctx.arc(350, 150, 40, 0, Math.PI * 2); ctx.fill();
                }
            } else if (data.name === "Marte") {
                for (let i = 0; i < 15; i++) {
                    ctx.fillStyle = "rgba(139, 69, 19, 0.6)";
                    ctx.beginPath(); ctx.arc(Math.random()*512, Math.random()*256, Math.random()*20+5, 0, Math.PI*2); ctx.fill();
                }
            } else if (data.name === "Tierra") {
                for (let i = 0; i < 8; i++) {
                    ctx.fillStyle = "rgba(34, 139, 34, 0.8)";
                    ctx.fillRect(Math.random()*512, Math.random()*256, Math.random()*60+20, Math.random()*40+20);
                }
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            const geometry = new THREE.SphereGeometry(data.size, 64, 64);
            const material = new THREE.MeshStandardMaterial({ map: texture, roughness: 0.8, metalness: 0.1 });
            const planet = new THREE.Mesh(geometry, material);
            planet.castShadow = true; planet.receiveShadow = true;
            
            planet.position.x = Math.cos(Math.random() * Math.PI * 2) * data.distance;
            planet.position.z = Math.sin(Math.random() * Math.PI * 2) * data.distance;
            
            scene.add(planet);
            planet.userData = { ...data, index };
            
            if (data.hasRings) createPlanetRings(data, planet);
            
            planets.push(planet);
            planetMeshes.push(planet);
        }
        
        function createPlanetRings(data, planet) {
            const ringGeometry = new THREE.RingGeometry(data.size * 1.4, data.size * 2.2, 64);
            const canvas = document.createElement('canvas');
            canvas.width = 512; canvas.height = 256;
            const ctx = canvas.getContext('2d');
            
            const gradient = ctx.createLinearGradient(0, 0, 512, 0);
            gradient.addColorStop(0, `rgba(255, 255, 255, 0)`);
            gradient.addColorStop(0.4, data.ringColor);
            gradient.addColorStop(0.6, data.ringColor);
            gradient.addColorStop(1, `rgba(255, 255, 255, 0)`);
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 512, 256);
            
            const ringTexture = new THREE.CanvasTexture(canvas);
            const ringMaterial = new THREE.MeshBasicMaterial({
                map: ringTexture, side: THREE.DoubleSide, transparent: true, opacity: 0.9
            });
            const rings = new THREE.Mesh(ringGeometry, ringMaterial);
            rings.rotation.x = Math.PI / 2.5;
            planet.add(rings);
        }
        
        function onMouseClick(event) {
            event.preventDefault();
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(planetMeshes.filter(mesh => mesh !== window.sunLight));
            
            if (intersects.length > 0) {
                const object = intersects[0].object;
                if (object.userData && object.userData.name) {
                    showPlanetInfo(object.userData);
                    unlockAchievement(object.userData.name);
                    updateScore(100);
                }
            }
        }
        
        function showPlanetInfo(planetData) {
            currentPlanet = planetData;
            const panel = document.getElementById('planet-info-panel');
            document.getElementById('planet-name').textContent = planetData.name;
            document.getElementById('planet-description').innerHTML = `<p>${planetData.description}</p>`;
            
            let factsHTML = '';
            for (const [key, value] of Object.entries(planetData.facts)) {
                factsHTML += `<div class="fact-item"><span class="fact-label">${key}:</span> ${value}</div>`;
            }
            document.getElementById('planet-facts').innerHTML = factsHTML;
            panel.style.display = 'block';
            
            if (currentPlanet.name !== "Sol") {
                controls.target.copy(currentPlanet.position);
                camera.position.set(
                    currentPlanet.position.x + 30,
                    currentPlanet.position.y + 20,
                    currentPlanet.position.z + 30
                );
                controls.update();
            } else resetCamera();
        }
        
        function showAllPlanets() {
            const allPositions = planetMeshes.map(mesh => mesh.position);
            const center = new THREE.Vector3().addVectors(...allPositions).divideScalar(allPositions.length);
            const maxDistance = Math.max(...allPositions.map(pos => pos.distanceTo(center)));
            const viewDistance = maxDistance * 2.5;
            
            camera.position.set(
                center.x + viewDistance * 0.6,
                center.y + viewDistance * 0.7,
                center.z + viewDistance * 0.6
            );
            controls.target.copy(center);
            controls.update();
            document.getElementById('planet-info-panel').style.display = 'none';
        }
        
        function resetCamera() {
            camera.position.set(0, 150, 300);
            controls.target.set(0, 0, 0);
            controls.update();
            document.getElementById('planet-info-panel').style.display = 'none';
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            planetMeshes.forEach((mesh, index) => {
                if (mesh.userData.type === 'sun') return;
                mesh.rotation.y += 0.005 * speedMultiplier;
            });
            
            planets.forEach((planet, index) => {
                const data = planetData[index];
                const angle = Date.now() * 0.0001 * data.speed * speedMultiplier;
                if (!currentPlanet || planet !== currentPlanet) {
                    planet.position.x = Math.cos(angle) * data.distance;
                    planet.position.z = Math.sin(angle) * data.distance;
                }
            });
            
            controls.update();
            renderer.render(scene, camera);
        }
        
        // Gamificaci√≥n
        let achievements = [];
        
        function initializeGame() {
            score = 0; unlockedAchievements.clear();
            updateScoreDisplay(); updateAchievementsList();
            addAchievement("Explorador Novato", "Haz clic en un planeta por primera vez", "üåü");
            addAchievement("Amante de los Anillos", "Descubre Saturno y sus anillos", "ü™ê");
            addAchievement("Planeta Rojo", "Investiga Marte", "üî¥");
            addAchievement("Gigante Joviano", "Explora el gigante gaseoso", "üîµ");
            addAchievement("Maestro Solar", "Visita todos los planetas", "üèÜ");
        }
        
        function addAchievement(name, description, icon) {
            achievements.push({ name, description, icon, unlocked: false });
        }
        
        function unlockAchievement(planetName) {
            if (planetName === "Mercurio" && !unlockedAchievements.has("explorado_mercurio")) {
                unlockedAchievements.add("explorado_mercurio"); unlockSpecificAchievement("Explorador Novato");
            } else if (planetName === "Saturno" && !unlockedAchievements.has("saturn_visited")) {
                unlockedAchievements.add("saturn_visited"); unlockSpecificAchievement("Amante de los Anillos");
            } else if (planetName === "Marte" && !unlockedAchievements.has("mars_visited")) {
                unlockedAchievements.add("mars_visited"); unlockSpecificAchievement("Planeta Rojo");
            } else if (planetName === "J√∫piter") {
                unlockedAchievements.add("jupiter_visited"); unlockSpecificAchievement("Gigante Joviano");
            }
            checkFinalAchievement();
        }
        
        function unlockSpecificAchievement(achievementName) {
            const achievementIndex = achievements.findIndex(a => a.name === achievementName);
            if (achievementIndex !== -1 && !achievements[achievementIndex].unlocked) {
                achievements[achievementIndex].unlocked = true;
                showNotification(`¬°Logro desbloqueado! ${achievements[achievementIndex].icon} ${achievementName}`);
                playSound('coin');
            }
            updateAchievementsList();
        }
        
        function checkFinalAchievement() {
            if (unlockedAchievements.size >= 4 && !unlockedAchievements.has("final_achieved")) {
                unlockedAchievements.add("final_achieved"); unlockSpecificAchievement("Maestro Solar");
                score += 500; updateScoreDisplay();
            }
        }
        
        function updateScore(points) { score += points; updateScoreDisplay(); }
        function updateScoreDisplay() { document.getElementById('score').textContent = score; }
        
        function updateAchievementsList() {
            const list = document.getElementById('achievementsList'); list.innerHTML = '';
            achievements.forEach((achievement, index) => {
                const li = document.createElement('li');
                li.className = `achievement ${achievement.unlocked ? 'unlocked' : ''}`;
                let iconText = achievement.unlocked ? achievement.icon : 'üîí';
                if (!achievement.unlocked) li.innerHTML = `<span class="achievement-icon">${iconText}</span><span>${achievement.name} (${achievement.description})</span>`;
                else li.innerHTML = `<span class="achievement-icon">${iconText}</span><span>${achievement.name}</span>`;
                list.appendChild(li);
            });
        }
        
        function resetGame() { initializeGame(); showNotification("Misi√≥n reiniciada. ¬°Buena suerte!"); }
        
        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode); gainNode.connect(audioContext.destination);
                
                if (type === 'coin') {
                    oscillator.type = 'sine'; oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(1760, audioContext.currentTime + 0.1);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(); oscillator.stop(audioContext.currentTime + 0.2);
                }
            } catch (e) {}
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                background: linear-gradient(45deg, #ff6b6b, #feca57); color: white;
                padding: 15px 30px; border-radius: 30px; font-weight: bold; z-index: 100;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3); animation: slideDown 0.5s ease-out;
            `;
            notification.textContent = message; document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
        
        window.speedSliderChange = function() {
            speedMultiplier = parseFloat(document.getElementById('speedSlider').value);
            document.getElementById('speedValue').textContent = speedMultiplier + 'x';
        };
        
        window.resetCamera = resetCamera; window.showAllPlanets = showAllPlanets;
        window.toggleStarfield = toggleStarfield; window.takeScreenshot = takeScreenshot;
        window.initializeGame = initializeGame; window.updateScore = updateScore;
        
        function takeScreenshot() {
            renderer.render(scene, camera);
            const dataURL = renderer.domElement.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `sistema-solar-${Date.now()}.png`; link.href = dataURL; link.click();
            showNotification("Captura de pantalla guardada");
        }
        
        // Iniciar
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>