<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåå Sistema Solar 3D | Por Cocobot</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #000; overflow: hidden; color: #fff; }
        #canvas-container { width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; }
        #hamburger-btn { position: fixed; top: 20px; left: 20px; z-index: 1000; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); color: #fff; padding: 15px; border-radius: 10px; cursor: pointer; font-size: 24px; backdrop-filter: blur(10px); transition: all 0.3s; }
        #hamburger-btn:hover { background: rgba(255,255,255,0.2); transform: scale(1.1); }
        #menu { position: fixed; top: 0; left: -350px; width: 350px; height: 100vh; background: rgba(0,0,0,0.95); z-index: 999; overflow-y: auto; transition: left 0.3s ease; backdrop-filter: blur(20px); border-right: 1px solid rgba(255,255,255,0.1); }
        #menu.active { left: 0; }
        #menu-header { padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); text-align: center; position: relative; }
        #menu-header h1 { font-size: 1.8em; margin-bottom: 10px; }
        #close-btn { position: absolute; top: 20px; right: 20px; background: none; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .planet-btn { display: block; width: 100%; padding: 15px 20px; margin: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: #fff; text-align: left; cursor: pointer; transition: all 0.3s; font-size: 1em; }
        .planet-btn:hover { background: rgba(255,255,255,0.1); transform: translateX(10px); }
        .planet-btn.active { background: linear-gradient(135deg, #00d9ff 0%, #00ff88 100%); font-weight: bold; }
        #planet-info { padding: 30px; margin-top: 20px; background: rgba(255,255,255,0.02); border-radius: 15px; }
        #planet-info h2 { color: #00d9ff; margin-bottom: 15px; font-size: 1.5em; }
        #planet-info p { line-height: 1.6; color: #ccc; margin-bottom: 10px; }
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .info-label { color: #888; }
        .info-value { color: #00ff88; font-weight: bold; }
        #controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 100; background: rgba(0,0,0,0.7); padding: 15px 25px; border-radius: 30px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        #speed-control { display: flex; align-items: center; gap: 15px; }
        #speed-slider { width: 150px; cursor: pointer; }
        #speed-label { min-width: 60px; font-size: 0.9em; }
        #instructions { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 100; background: rgba(0,0,0,0.7); padding: 10px 20px; border-radius: 20px; font-size: 0.85em; color: #aaa; text-align: center; }
        @media (max-width: 768px) { #menu { width: 100%; left: -100%; } #menu-header h1 { font-size: 1.4em; } #controls { bottom: 10px; padding: 10px 15px; } #speed-slider { width: 100px; } #instructions { bottom: 60px; font-size: 0.75em; padding: 8px 12px; } }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    <button id="hamburger-btn">‚ò∞</button>
    <div id="menu">
        <div id="menu-header">
            <h1>üåå Sistema Solar</h1>
            <p>Por Cocobot üê±ü§ñ</p>
            <button id="close-btn">√ó</button>
        </div>
        <div id="planet-buttons">
            <button class="planet-btn" data-planet="sun">‚òÄÔ∏è Sol</button>
            <button class="planet-btn" data-planet="mercury">üåë Mercurio</button>
            <button class="planet-btn" data-planet="venus">üåï Venus</button>
            <button class="planet-btn" data-planet="earth">üåç Tierra</button>
            <button class="planet-btn" data-planet="mars">üî¥ Marte</button>
            <button class="planet-btn" data-planet="jupiter">ü™ê J√∫piter</button>
            <button class="planet-btn" data-planet="saturn">üíõ Saturno</button>
            <button class="planet-btn" data-planet="uranus">üíô Urano</button>
            <button class="planet-btn" data-planet="neptune">üîµ Neptuno</button>
        </div>
        <div id="planet-info">
            <h2 id="info-title">Selecciona un planeta</h2>
            <p id="info-desc">Haz clic en un planeta del men√∫ o en la escena 3D para ver su informaci√≥n</p>
        </div>
    </div>
    <div id="instructions">üñ±Ô∏è Click en planetas para zoom | üîÑ Arrastra para rotar | üîç Scroll para zoom</div>
    <div id="controls">
        <div id="speed-control">
            <label>‚ö° Velocidad:</label>
            <input type="range" id="speed-slider" min="0" max="100" value="5">
            <span id="speed-label">5%</span>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        let scene, camera, renderer, controls;
        let sun, planets = [];
        let orbitSpeed = 0.005;
        let selectedPlanetKey = null;
        let isMenuOpen = false;
        let isZooming = false;
        let zoomProgress = 0;
        
        // TEXTURAS LOCALES (sin CORS)
        const textureLoader = new THREE.TextureLoader();
        const texturePaths = {
            sun: './textures/sun.jpg',
            mercury: './textures/mercury.jpg',
            venus: './textures/venus.jpg',
            earth: './textures/earth.jpg',
            mars: './textures/mars.jpg',
            jupiter: './textures/jupiter.jpg',
            saturn: './textures/saturn.jpg',
            uranus: './textures/uranus.jpg',
            neptune: './textures/neptune.jpg'
        };
        
        const planetData = {
            sun: { name: "Sol", radius: 5, distance: 0, color: 0xffdd00, info: { type: "Estrella", diameter: "1.392.700 km", temp: "5.505¬∞C (superficie)", age: "4.600 millones de a√±os", description: "El Sol es la estrella del sistema solar. Es una esfera casi perfecta de plasma caliente, calentada por la fusi√≥n nuclear en su n√∫cleo." } },
            mercury: { name: "Mercurio", radius: 0.8, distance: 12, color: 0xb5b5b5, info: { type: "Planeta rocoso", diameter: "4.879 km", temp: "-173¬∞C a 427¬∞C", day: "59 d√≠as terrestres", description: "Mercurio es el planeta m√°s peque√±o y cercano al Sol. Tiene una superficie llena de cr√°teres similar a la Luna." } },
            venus: { name: "Venus", radius: 1.2, distance: 18, color: 0xffa500, info: { type: "Planeta rocoso", diameter: "12.104 km", temp: "462¬∞C", day: "243 d√≠as terrestres", description: "Venus es el planeta m√°s caliente del sistema solar debido a su densa atm√≥sfera de CO‚ÇÇ que genera un efecto invernadero extremo." } },
            earth: { name: "Tierra", radius: 1.3, distance: 26, color: 0x6b93d6, info: { type: "Planeta rocoso", diameter: "12.742 km", temp: "15¬∞C (media)", day: "24 horas", description: "Nuestro hogar. El √∫nico planeta conocido con vida. Tiene agua l√≠quida en su superficie y una atm√≥sfera rica en nitr√≥geno y ox√≠geno." } },
            mars: { name: "Marte", radius: 1.0, distance: 34, color: 0xff4500, info: { type: "Planeta rocoso", diameter: "6.779 km", temp: "-63¬∞C (media)", day: "24h 37m", description: "El Planeta Rojo. Tiene el volc√°n m√°s grande del sistema solar (Olympus Mons) y un ca√±√≥n que se extiende 4.000 km." } },
            jupiter: { name: "J√∫piter", radius: 3.5, distance: 50, color: 0xd2b48c, info: { type: "Gigante gaseoso", diameter: "139.820 km", temp: "-108¬∞C", day: "9h 56m", description: "El planeta m√°s grande del sistema solar. Es un gigante gaseoso con una Gran Mancha Roja, una tormenta que dura siglos." } },
            saturn: { name: "Saturno", radius: 3.0, distance: 70, color: 0xf4a460, hasRings: true, info: { type: "Gigante gaseoso", diameter: "116.460 km", temp: "-139¬∞C", day: "10h 42m", description: "Famoso por sus espectaculares anillos compuestos de hielo y roca. Es el segundo planeta m√°s grande del sistema solar." } },
            uranus: { name: "Urano", radius: 2.0, distance: 90, color: 0xadd8e6, info: { type: "Gigante de hielo", diameter: "50.724 km", temp: "-197¬∞C", day: "17h 14m", description: "Un gigante de hielo que rota de lado. Tiene un color azul verdoso debido al metano en su atm√≥sfera." } },
            neptune: { name: "Neptuno", radius: 1.9, distance: 110, color: 0x4169e1, info: { type: "Gigante de hielo", diameter: "49.244 km", temp: "-201¬∞C", day: "16h 6m", description: "El planeta m√°s lejano del Sol. Tiene los vientos m√°s fuertes del sistema solar, alcanzando 2.100 km/h." } }
        };
        
        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000011);
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 50, 120);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 10;
            controls.maxDistance = 300;
            
            // Luces mejoradas para que se vea bien
            const ambientLight = new THREE.AmbientLight(0x555555, 2);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 5, 300);
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);
            
            createSun();
            createPlanets();
            createStars();
            setupEvents();
            animate();
        }
        
        function createSun() {
            const geometry = new THREE.SphereGeometry(planetData.sun.radius, 32, 32);
            const texture = textureLoader.load(texturePaths.sun);
            const material = new THREE.MeshBasicMaterial({ map: texture, color: 0xffffff });
            sun = new THREE.Mesh(geometry, material);
            sun.userData = { key: 'sun', name: 'Sol' };
            scene.add(sun);
            
            // Brillo del sol
            const glowGeometry = new THREE.SphereGeometry(planetData.sun.radius * 1.3, 32, 32);
            const glowMaterial = new THREE.MeshBasicMaterial({ color: 0xffdd00, transparent: true, opacity: 0.5 });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            scene.add(glow);
        }
        
        function createPlanets() {
            Object.keys(planetData).forEach(key => {
                if (key === 'sun') return;
                const data = planetData[key];
                const planetGroup = new THREE.Group();
                const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
                const texture = textureLoader.load(texturePaths[key]);
                const material = new THREE.MeshStandardMaterial({ 
                    map: texture, 
                    color: 0xffffff,
                    roughness: 0.7,
                    metalness: 0.1
                });
                const planet = new THREE.Mesh(geometry, material);
                planet.position.x = data.distance;
                planet.userData = { key: key, name: data.name };
                planetGroup.add(planet);
                
                // √ìrbita
                const orbitGeometry = new THREE.RingGeometry(data.distance - 0.1, data.distance + 0.1, 64);
                const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.1, side: THREE.DoubleSide });
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2;
                scene.add(orbit);
                
                // Anillos de Saturno
                if (data.hasRings) {
                    const ringGeometry = new THREE.RingGeometry(data.radius * 1.4, data.radius * 2.2, 64);
                    const ringMaterial = new THREE.MeshBasicMaterial({ color: 0xc9a86c, transparent: true, opacity: 0.7, side: THREE.DoubleSide });
                    const rings = new THREE.Mesh(ringGeometry, ringMaterial);
                    rings.rotation.x = Math.PI / 2;
                    planet.add(rings);
                }
                
                scene.add(planetGroup);
                planets.push({ group: planetGroup, mesh: planet, data: data, angle: Math.random() * Math.PI * 2 });
            });
        }
        
        function createStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5, transparent: true, opacity: 0.8 });
            const starsVertices = [];
            for (let i = 0; i < 10000; i++) {
                starsVertices.push((Math.random() - 0.5) * 1000, (Math.random() - 0.5) * 1000, (Math.random() - 0.5) * 1000);
            }
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }
        
        function setupEvents() {
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const closeBtn = document.getElementById('close-btn');
            const menu = document.getElementById('menu');
            hamburgerBtn.addEventListener('click', () => { menu.classList.add('active'); isMenuOpen = true; });
            closeBtn.addEventListener('click', () => { menu.classList.remove('active'); isMenuOpen = false; });
            document.querySelectorAll('.planet-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const planetKey = btn.dataset.planet;
                    selectPlanet(planetKey);
                    document.querySelectorAll('.planet-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    menu.classList.remove('active');
                    isMenuOpen = false;
                });
            });
            const speedSlider = document.getElementById('speed-slider');
            const speedLabel = document.getElementById('speed-label');
            speedSlider.addEventListener('input', (e) => { orbitSpeed = e.target.value / 1000; speedLabel.textContent = e.target.value + '%'; });
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            renderer.domElement.addEventListener('click', (event) => {
                if (isMenuOpen) return;
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                raycaster.setFromCamera(mouse, camera);
                const planetMeshes = [sun, ...planets.map(p => p.mesh)];
                const intersects = raycaster.intersectObjects(planetMeshes);
                if (intersects.length > 0) selectPlanet(intersects[0].object.userData.key);
            });
            window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
        }
        
        function selectPlanet(planetKey) {
            selectedPlanetKey = planetKey;
            const data = planetData[planetKey];
            const infoContainer = document.getElementById('planet-info');
            while (infoContainer.firstChild) infoContainer.removeChild(infoContainer.firstChild);
            const newTitle = document.createElement('h2');
            newTitle.textContent = data.name;
            infoContainer.appendChild(newTitle);
            const infoRows = [
                { label: 'Tipo:', value: data.info.type },
                { label: 'Di√°metro:', value: data.info.diameter },
                { label: 'Temperatura:', value: data.info.temp },
                { label: 'D√≠a:', value: data.info.day || data.info.age || '' }
            ];
            infoRows.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'info-row';
                const labelSpan = document.createElement('span');
                labelSpan.className = 'info-label';
                labelSpan.textContent = row.label;
                const valueSpan = document.createElement('span');
                valueSpan.className = 'info-value';
                valueSpan.textContent = row.value;
                rowDiv.appendChild(labelSpan);
                rowDiv.appendChild(valueSpan);
                infoContainer.appendChild(rowDiv);
            });
            const descP = document.createElement('p');
            descP.style.marginTop = '15px';
            descP.textContent = data.info.description;
            infoContainer.appendChild(descP);
            
            // INICIAR ZOOM
            isZooming = true;
            zoomProgress = 0;
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Mover planetas
            planets.forEach(planet => {
                planet.angle += orbitSpeed;
                planet.mesh.position.x = Math.cos(planet.angle) * planet.data.distance;
                planet.mesh.position.z = Math.sin(planet.angle) * planet.data.distance;
                planet.mesh.rotation.y += 0.01;
            });
            if (sun) sun.rotation.y += 0.005;
            
            // ZOOM ANIMADO
            if (isZooming && selectedPlanetKey) {
                let targetMesh;
                if (selectedPlanetKey === 'sun') {
                    targetMesh = sun;
                } else {
                    const planetObj = planets.find(p => p.data.key === selectedPlanetKey);
                    targetMesh = planetObj ? planetObj.mesh : null;
                }
                
                if (targetMesh) {
                    const targetPos = targetMesh.position.clone();
                    const radius = selectedPlanetKey === 'sun' ? planetData.sun.radius : planets.find(p => p.data.key === selectedPlanetKey).data.radius;
                    const offsetZ = radius * 5;
                    const offsetY = radius * 3;
                    const targetCameraPos = targetPos.clone().add(new THREE.Vector3(0, offsetY, offsetZ));
                    
                    // Interpolaci√≥n suave
                    camera.position.lerp(targetCameraPos, 0.03);
                    controls.target.lerp(targetPos, 0.03);
                    
                    zoomProgress += 0.03;
                    if (zoomProgress >= 1) {
                        zoomProgress = 1;
                        isZooming = false;
                    }
                }
            }
            
            controls.update();
            renderer.render(scene, camera);
        }
        
        init();
    </script>
</body>
</html>
